"use strict";var $sanitizeMinErr=angular.$$minErr("$sanitize");function $SanitizeProvider(){this.$get=["$$sanitizeUri",function(a){return function(c){var b=[];htmlParser(c,htmlSanitizeWriter(b,function(e,d){return !/^unsafe/.test(a(e,d))}));return b.join("")}}]}function sanitizeText(b){var c=[];var a=htmlSanitizeWriter(c,angular.noop);a.chars(b);return c.join("")}var START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g;var voidElements=makeMap("area,br,col,hr,img,wbr");var optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements);var blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"));var inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var specialElements=makeMap("script,style");var validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements);var uriAttrs=makeMap("background,cite,href,longdesc,src,usemap");var validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"));function makeMap(b){var d={},a=b.split(","),c;for(c=0;c<a.length;c++){d[a[c]]=true}return d}function htmlParser(f,j){if(typeof f!=="string"){if(f===null||typeof f==="undefined"){f=""}else{f=""+f}}var h,d,a,e=[],i=f,c;e.last=function(){return e[e.length-1]};while(f){c="";d=true;if(!e.last()||!specialElements[e.last()]){if(f.indexOf("<!--")===0){h=f.indexOf("--",4);if(h>=0&&f.lastIndexOf("-->",h)===h){if(j.comment){j.comment(f.substring(4,h))}f=f.substring(h+3);d=false}}else{if(DOCTYPE_REGEXP.test(f)){a=f.match(DOCTYPE_REGEXP);if(a){f=f.replace(a[0],"");d=false}}else{if(BEGING_END_TAGE_REGEXP.test(f)){a=f.match(END_TAG_REGEXP);if(a){f=f.substring(a[0].length);a[0].replace(END_TAG_REGEXP,b);d=false}}else{if(BEGIN_TAG_REGEXP.test(f)){a=f.match(START_TAG_REGEXP);if(a){if(a[4]){f=f.substring(a[0].length);a[0].replace(START_TAG_REGEXP,g)}d=false}else{c+="<";f=f.substring(1)}}}}}if(d){h=f.indexOf("<");c+=h<0?f:f.substring(0,h);f=h<0?"":f.substring(h);if(j.chars){j.chars(decodeEntities(c))}}}else{f=f.replace(new RegExp("(.*)<\\s*\\/\\s*"+e.last()+"[^>]*>","i"),function(l,k){k=k.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1");if(j.chars){j.chars(decodeEntities(k))}return""});b("",e.last())}if(f==i){throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",f)}i=f}b();function g(m,l,k,n){l=angular.lowercase(l);if(blockElements[l]){while(e.last()&&inlineElements[e.last()]){b("",e.last())}}if(optionalEndTagElements[l]&&e.last()==l){b("",l)}n=voidElements[l]||!!n;if(!n){e.push(l)}var o={};k.replace(ATTR_REGEXP,function(q,s,p,u,r){var t=p||u||r||"";o[s]=decodeEntities(t)});if(j.start){j.start(l,o,n)}}function b(l,k){var n=0,m;k=angular.lowercase(k);if(k){for(n=e.length-1;n>=0;n--){if(e[n]==k){break}}}if(n>=0){for(m=e.length-1;m>=n;m--){if(j.end){j.end(e[m])}}e.length=n}}}var hiddenPre=document.createElement("pre");var spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;function decodeEntities(e){if(!e){return""}var d=spaceRe.exec(e);var b=d[1];var a=d[3];var c=d[2];if(c){hiddenPre.innerHTML=c.replace(/</g,"<");c="textContent" in hiddenPre?hiddenPre.textContent:hiddenPre.innerText}return b+c+a}function encodeEntities(a){return a.replace(/&/g,"&").replace(SURROGATE_PAIR_REGEXP,function(d){var c=d.charCodeAt(0);var b=d.charCodeAt(1);return"&#"+(((c-55296)*1024)+(b-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(b){return"&#"+b.charCodeAt(0)+";"}).replace(/</g,"<").replace(/>/g,">")}function htmlSanitizeWriter(d,c){var a=false;var b=angular.bind(d,d.push);return{start:function(g,f,e){g=angular.lowercase(g);if(!a&&specialElements[g]){a=g}if(!a&&validElements[g]===true){b("<");b(g);angular.forEach(f,function(k,j){var h=angular.lowercase(j);var i=(g==="img"&&h==="src")||(h==="background");if(validAttrs[h]===true&&(uriAttrs[h]!==true||c(k,i))){b(" ");b(j);b('="');b(encodeEntities(k));b('"')}});b(e?"/>":">")}},end:function(e){e=angular.lowercase(e);if(!a&&validElements[e]===true){b("</");b(e);b(">")}if(e==a){a=false}},chars:function(e){if(!a){b(encodeEntities(e))}}}}angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider);